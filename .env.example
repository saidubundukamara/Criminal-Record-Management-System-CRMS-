# ====================
# DATABASE
# ====================
DATABASE_URL="postgresql://user:password@localhost:5433/crms"

# ====================
# NEXTAUTH
# ====================
# Generate with: openssl rand -base64 32
NEXTAUTH_URL="http://localhost:3000"
NEXTAUTH_SECRET="generate-with-openssl-rand-base64-32"

# ====================
# ENCRYPTION
# ====================
# Generate with: openssl rand -hex 32
ENCRYPTION_KEY="generate-with-openssl-rand-hex-32"

# ====================
# APPLICATION
# ====================
NODE_ENV="development"
NEXT_PUBLIC_APP_URL="http://localhost:3000"

# Country Code (ISO 3166-1 alpha-3)
# Examples: SLE (Sierra Leone), GHA (Ghana), NGA (Nigeria), KEN (Kenya), ZAF (South Africa)
COUNTRY_CODE="SLE"

# ====================
# STORAGE (S3-compatible)
# ====================
# For local development with MinIO:
S3_ENDPOINT="http://localhost:9000"
S3_ACCESS_KEY="minioadmin"
S3_SECRET_KEY="minioadmin"
S3_BUCKET="crms-evidence"
S3_REGION="us-east-1"

# For AWS S3 (production):
# S3_ENDPOINT="https://s3.amazonaws.com"
# S3_ACCESS_KEY="your-aws-access-key"
# S3_SECRET_KEY="your-aws-secret-key"
# S3_BUCKET="crms-evidence-prod"
# S3_REGION="af-south-1"

# ====================
# USSD (Phase 7 - Officer Field Tools)
# ====================
# Provider: Africa's Talking or Twilio
USSD_API_KEY="your-africas-talking-api-key"
USSD_USERNAME="sandbox"  # Use "sandbox" for testing, your username for production
USSD_SHORTCODE="*456#"   # Your assigned USSD shortcode (e.g., *123#, *456#)

# USSD Session Configuration
USSD_SESSION_TTL="180000"  # 3 minutes (180000ms) - USSD standard timeout
USSD_DEFAULT_DAILY_LIMIT="50"  # Default queries per officer per day

# Production: Use Redis for USSD session storage
# Development: Uses in-memory Map (data lost on restart)
# REDIS_URL="redis://localhost:6379"  # For USSD session management in production

# ====================
# SMS (for MFA)
# ====================
SMS_API_KEY="your-sms-api-key"
SMS_SENDER_ID="CRMS"

# ====================
# RATE LIMITING
# ====================
RATE_LIMIT_MAX="100"
RATE_LIMIT_WINDOW="60000"

# ====================
# SESSION
# ====================
SESSION_MAX_AGE="900"  # 15 minutes
SESSION_REFRESH_AGE="86400"  # 24 hours

# ====================
# FEATURE FLAGS
# ====================
ENABLE_MFA="false"  # Phase 10 - Multi-factor authentication
ENABLE_USSD="true"  # Phase 7 - Officer field tools via USSD (NOW AVAILABLE)
ENABLE_OFFLINE="false"  # Phase 3 - Offline-first PWA features
ENABLE_REGISTRATION="false"  # Public registration disabled by default

# ====================
# NATIONAL ID INTEGRATION (Optional)
# ====================
# Example for Ghana NIA API:
# NIA_API_ENDPOINT="https://api.nia.gov.gh/verify"
# NIA_API_KEY="your-nia-api-key"

# Example for Nigeria NIMC API:
# NIMC_API_ENDPOINT="https://api.nimc.gov.ng/verify"
# NIMC_API_KEY="your-nimc-api-key"

# ====================
# COURT SYSTEM INTEGRATION (Optional)
# ====================
# COURT_API_ENDPOINT="https://court-system.gov/api"
# COURT_API_KEY="your-court-api-key"

# ====================
# MONITORING & LOGGING (Production)
# ====================
# SENTRY_DSN="your-sentry-dsn"
# LOG_LEVEL="info"

# ====================
# EMAIL (Optional)
# ====================
# SMTP_HOST="smtp.gmail.com"
# SMTP_PORT="587"
# SMTP_USER="your-email@gmail.com"
# SMTP_PASSWORD="your-app-password"
# SMTP_FROM="CRMS <noreply@crms.gov.sl>"

# ====================
# UPSTASH REDIS (Rate Limiting & Caching)
# ====================
# Get credentials from: https://upstash.com/
# 1. Create a new Redis database at Upstash
# 2. Copy the REST URL and REST token from the dashboard
# 3. Upstash Redis works globally with REST API (no direct connection needed)
UPSTASH_REDIS_REST_URL="https://your-redis-instance.upstash.io"
UPSTASH_REDIS_REST_TOKEN="your-upstash-rest-token"

# For local development (optional - can use Upstash free tier):
# REDIS_URL="redis://localhost:6379"

# ====================
# DEVELOPMENT ONLY
# ====================
# Set to true to enable verbose logging
DEBUG="false"

# Set to true to skip certain validations during development
DEV_MODE="true"

# ====================
# NOTES
# ====================
# 1. NEVER commit the .env file to version control!
# 2. Copy this file to .env and fill in your values
# 3. Rotate NEXTAUTH_SECRET and ENCRYPTION_KEY regularly (every 90 days)
# 4. Use strong, unique passwords for DATABASE_URL
# 5. Enable HTTPS (TLS 1.3) in production
# 6. Set NODE_ENV="production" in production
